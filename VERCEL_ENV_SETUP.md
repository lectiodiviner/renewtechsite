# Vercel QnA 500 에러 해결 가이드

## 문제 해결 완료 ✅

QnA 제출 시 발생하는 500 Internal Server Error 문제를 해결했습니다.

### 🔧 수정된 내용

1. **서버리스 함수 구조 개선**: Vercel에 최적화된 별도의 API 핸들러 생성
2. **ESM 모듈 호환성**: 모든 import 경로를 `.js` 확장자로 수정
3. **안전한 에러 핸들링**: 더 상세한 에러 로깅 및 검증 추가
4. **CORS 설정**: Vercel에서 필요한 CORS 헤더 추가
5. **메모리 스토리지**: Supabase 연결 없이도 작동하는 폴백 시스템

### 📁 새로운 파일 구조

```
api/
  └── qna.ts          # Vercel 서버리스 함수 (QnA API)
server/
  ├── index.ts        # 기존 Express 서버 (로컬 개발용)
  ├── routes.ts       # 라우트 정의
  └── ...
```

### 🚀 배포 방법

1. **코드 푸시**: 변경사항을 Git에 푸시
2. **자동 배포**: Vercel이 자동으로 배포를 시작
3. **테스트**: 배포 완료 후 QnA 폼에서 테스트

### ✅ 확인 사항

배포 후 다음을 확인하세요:

1. **QnA 제출 테스트**: 
   - 이름, 이메일, 질문을 입력하고 제출
   - 성공 메시지가 표시되는지 확인

2. **Vercel Functions 로그**:
   - Vercel 대시보드 → Functions 탭에서 로그 확인
   - 에러가 없는지 확인

### 🔍 문제 해결

만약 여전히 문제가 있다면:

1. **Vercel Functions 로그 확인**:
   ```
   Vercel 대시보드 → 프로젝트 → Functions → api/qna.ts
   ```

2. **브라우저 개발자 도구**:
   - Network 탭에서 API 요청/응답 확인
   - Console 탭에서 JavaScript 에러 확인

3. **환경 변수 확인** (선택사항):
   - Supabase를 사용하려면 환경 변수 설정 필요
   - 현재는 메모리 스토리지로 작동

### 📝 기술적 세부사항

- **API 엔드포인트**: `/api/qna`
- **지원 메서드**: GET, POST
- **데이터 저장**: 메모리 스토리지 (재시작 시 초기화)
- **타임아웃**: 30초
- **CORS**: 모든 도메인 허용

이제 QnA 기능이 안정적으로 작동할 것입니다! 🎉
